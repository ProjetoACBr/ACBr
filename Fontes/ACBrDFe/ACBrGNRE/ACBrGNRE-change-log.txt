{******************************************************************************}
{ Projeto: Componentes ACBr                                                    }
{  Biblioteca multiplataforma de componentes Delphi para interação com equipa- }
{ mentos de Automação Comercial utilizados no Brasil                           }
{                                                                              }
{ Direitos Autorais Reservados (c) 2020 Daniel Simoes de Almeida               }
{                                                                              }
{ Colaboradores nesse arquivo: Juliomar Marchetti                              }
{                              Claudemir Vitor Pereira                         }
{                                                                              }
{  Você pode obter a última versão desse arquivo na pagina do  Projeto ACBr    }
{ Componentes localizado em      http://www.sourceforge.net/projects/acbr      }
{                                                                              }
{  Esta biblioteca é software livre; você pode redistribuí-la e/ou modificá-la }
{ sob os termos da Licença Pública Geral Menor do GNU conforme publicada pela  }
{ Free Software Foundation; tanto a versão 2.1 da Licença, ou (a seu critério) }
{ qualquer versão posterior.                                                   }
{                                                                              }
{  Esta biblioteca é distribuída na expectativa de que seja útil, porém, SEM   }
{ NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU      }
{ ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA. Consulte a Licença Pública Geral Menor}
{ do GNU para mais detalhes. (Arquivo LICENÇA.TXT ou LICENSE.TXT)              }
{                                                                              }
{  Você deve ter recebido uma cópia da Licença Pública Geral Menor do GNU junto}
{ com esta biblioteca; se não, escreva para a Free Software Foundation, Inc.,  }
{ no endereço 59 Temple Street, Suite 330, Boston, MA 02111-1307 USA.          }
{ Você também pode obter uma copia da licença em:                              }
{ http://www.opensource.org/licenses/lgpl-license.php                          }
{                                                                              }
{ Daniel Simões de Almeida - daniel@projetoacbr.com.br - www.projetoacbr.com.br}
{       Rua Coronel Aureliano de Camargo, 963 - Tatuí - SP - 18270-170         }
{******************************************************************************}

{$I ACBr.inc}

{******************************************************************************
|* ACBrGNRE
|*
|* PROPÓSITO: Registro de Alterações
******************************************************************************}

Símbolo : Significado

[+]     : Novo recurso
[*]     : Recurso modificado/melhorado
[-]     : Correção de Bug (assim esperamos)

24/05/2024
-- Diversos --
[+] Adiciona suporte ao PIX, conforme versão 2.10 do Manual do GNRe
Por: Diego Folieni

21/03/2024
-- ACBrGNReWebServices --
[*] Adiciona chamada a UTF8ToNativeString quando usa ParseText para corrigir problemas de conversão de acentuação
Por: Diego Folieni

09/02/2024
-- Diversos --
[*] Refactoring visando deixar de usar a unit pcnAuxiliar.
  Por: Italo Giurizzato Junior

01/02/2024
-- Diversos --
[*] Refactoring visando deixar de usar a unit pcnConsts.
  Por: Italo Giurizzato Junior

22/01/2024
-- ACBrGNREWebServices/pgnreConsResLoteGNRE/pgnreRetConsResLoteGNRE --
[*] Incluído na consulta do lote a tag opcional: incluirPDFGuias para que no
    retorno consta as guias no formato PDF.
  Por: Jacke Venson/Italo Giurizzato Junior

03/01/2024
-- ACBrGNReGuiasRetorno, pgnreRetConsResLoteGNRe --
[*] Otimização na leitura dos valores.
  Por: Diego Folieni
-- pgnreRetConsResLoteGNRE --
[*] Adiciona na leitura do retorno as propriedades ValorFCP, AtualizacaoMonetariaFCP, JurosFCP e MultaFCP.
  Por: Diego Folieni

07/11/2023
-- ACBrGNReGuias --
[*] Ajuste para que não quebre para quem usa CampoExtra sem identificação.
 Por: Diego Folieni
[*] Melhoria nas rotinas de leitura e geração do ini para atender número de ocorrências do elemento CampoExtra
 Por: Diego Folieni

21/90/2023
-- ACBrGNReGuias --
[*] Adiciona uma rotina para gerar o INI do GNRe, visando compatibilidade com outros DFes e facilidade em testes.
 Por: Diego Folieni

15/09/2023
-- pgnreGNRE, pgnreGNREW --
[*] Adição da propriedade e tag numeroControle e alteração no nº de ocorrências de dataPagamento para que fique de acordo com schema
 Por: Diego Folieni

01/08/2023
-- ACBrGNReGuias --
[*] Adiciona na leitura do INI os campos ValorFECP, TotalFECP, MultaFECP, JurosFECP
    AutalMonetFECP, MultaICMS, JurosICMS e AtualMonetICMS.
  Por: Diego Folieni #TK-4200

12/05/2023
[*]TK-3925 [Atualização FR3 Obrigatória] GNRE FR Valores FCP
  Por : Victor H Gonzales - Pandaaa
11/05/2023
-- Diversos --
[*] Remoção de regras de negócio na impressão da Guia em Fortes Report.
   Por: Italo Giurizzato Junior

05/05/2023
-- Diversos --
[*] Alteração para imprimir a guia na versão 2.00 corretamente independente se 
    tem ou não tem FECP e quando só tem o valor FECP.
    Alteração feita na impressão em Fortes Report.
   Por: Italo Giurizzato Junior

03/05/2023
-- ACBrGNREGuiasRetorno.pas --
[-] Alteração visando a não deduzir o valor do FECP quando este for diferente de
    zero.
   Por: Italo Giurizzato Junior

03/03/2023
-- ACBrGNREGuiasRetorno.pas --
[-] Estava duplicando o valor da guia quando tem tipo 22.
  Por: Isolopak

07/12/2022
-- Diversos --
[*] Melhorias para obter o nome do municipio ao carregar o XML para posterior
    impressão da guia.
   Por: Diego Foliene

24/05/2022
-- Diversos --
[*] Remoção de Warnings e Hints.
   Por: Italo Giurizzato Junior
-- ACBrGNREWebServices/pgnreRetConsConfigUF --
[*] Melhorias no retorno da consulta a configuração da UF.
  Por: Igor Cibiac

07/03/2022
-- ACBrGNREGuiasRetorno.pas --
[-] TK-2419 Correção exibição CPF/CNPJ na leitura para impressão
  Por: Pandaaa (Contribuição de Windsoft)
-- ACBrGNREGuiaFR.pas --
[-] TK-2419 Correção de visibilidade do PreparedReport, BUG em Published, alterado para Public
  Por: Pandaaa

27/01/2022
-- ACBrGNREWebServices --
[*] Ajuste na função clear em TGNRERecibo, não limpar a property NumeroRecibo
  Por: José M S Junior (Contribuição de WindSoft)

17/01/2022
-- ACBrGNREGuiasRetorno --
[*] Possível correção para a leitura dos valores da guia.
  Por: Italo Giurizzato Junior

04/01/2022
-- pgnreGNREW --
[*] Corrigido o tipo de campo da tag <mes>.
  Por: Italo Giurizzato Junior

25/11/2021
-- pgnreRetConsResLoteGNRE --
[*] Ajuste na leitura do Tipo do Documento Origem, visando contemplar as diferenças de
    tipos entre as UF.
  Por: Gutemberg S Costa

03/11/2021
-- ACBrGNREGuiasRetorno/pgnreGNRERetorno --
[+] Incluido os campos: ValorFCP, MultaFCP, JurosFCP e AtualizacaoMonetariaFCP.
  Por: Danrizzi

01/11/2021
-- ACBrGNREGuiasRetorno --
[-] Ajuste na validação de leitura dos dados da guia GNRe.
  Por: José M S Junior

11/06/2021
-- ACBrGNREGuiasRetorno --
[-] Possível correção, ao imprimir a Guia estava sendo impresso parte da chave
    da NF-e sendo que o correto seria o numero da nota.
  Por: Italo Giurizzato Junior

29/04/2021
-- ACBrGNREGuiasRetorno/pgnreGNRERetorno --
[+] Acrescentado o campo ValorPrincICMS na classe GNRERetorno para receber o valor do tipo 11
    (Valor Principal ICMS)
  Por: Italo Giurizzato Junior

18/03/2021
-- ACBrGNREGuiasRetorno/pgnreRetConsResLoteGNRE --
[*] https://www.projetoacbr.com.br/forum/topic/61723-retorno-rejei%C3%A7%C3%B5es-gnre-vers%C3%A3o-20/
  Por: Danilo Caneschi

01/03/2021
-- Diversos --
[+] Foi incluido na classe TGuiaCollectionItem as propriedades: NomeArq e TXT
    A propriedade XML (já existente) da lista de guias vai contem o XML da guia caso a versão for 2;
    A propriedade TXT da lista de guias vai conter o TXT da guia se a verão for 1;
    e NomeArq vai conter o Path+Nome da guia seja ela no formato TXT ou XML.
  Por: Italo Giurizzato Junior

04/02/2021
-- ACBrGNREGuiasRetorno --
[*] https://www.projetoacbr.com.br/forum/topic/60756-erro-de-impress%C3%A3o-das-informa%C3%A7%C3%B5es-complementares-gnre/
  Por: TI Automação
[*] https://www.projetoacbr.com.br/forum/topic/59279-erro-na-leitura-do-retornoimpress%C3%A3o-v200/
  Por: BSoft e Marco Moreira

11/11/2020
-- ACBrGNREWebServices --
[*] Ajustes na definição do path do XML Retorno seguindo a estrutura de diretórios do componente, para gravação das Guias.xml
  Por: José M S Junior

01/10/2020
-- ACBrGNREWebServices --
[*] https://www.projetoacbr.com.br/forum/topic/59481-mensagem-vazia/
  Por: Marco Moreira

23/07/2020
-- Diversos --
[+] Acrescentado a unit pcnConsts em algumas units do componente.
    Por conta da migração de algumas constantes de pcnGerador para
    pcnConsts.
   Por: Italo Jurisato Junior

14/05/2020
-- ACBrGNREWebServices --
[*] No método TGNRERecepcao.DefinirDadosMsg foi incluido a chamada ao 
    método RemoverDeclaracaoXML pois estava duplicando.
  Por: Italo Jurisato Junior
-- pgnreRetConsResLoteGNRE --
[*] Incluido a leitura do grupo <motivosRejeicao>.
  Por: RP Info Sistemas

08/05/2020
-- ACBrGNREWebServices --
[*] No método TGNRERecepcao.DefinirDadosMsg foi trocado a propriedade XML por
    XMLAssinado, desta forma o componente consegue gerar e assinar o XML 
    automaticamente antes do seu envio.
  Por: Italo Jurisato Junior
-- ACBrGNREWebServices --
[*] Ao realizar a consulta automatica verifica se o tempo de estimativa de 
    retorno é maior o que esta configurado no componente.
  Por: Italo Jurisato Junior

05/05/2020
-- Diversos --
[-] Possível correção na leitura do retorno do envio do GNRE.
    Não estava separando corretamente as guias.
  Por: Italo Jurisato Junior

16/03/2020
-- Diversos --
[+] Acrescentado novos campos especificos da versão 2.00
    (ValorFECP, TotalFECP, MultaICMS, MultaFECP, JurosICMS, 
     JurosFECP, AtualMonetICMS e AtualMonetFECP).
  Por: Italo Jurisato Junior

05/03/2020
-- ACBrGNREGuiaFRDM --
[*] Melhorias na impressão da guia do GNRE em Fast Report.
    https://www.projetoacbr.com.br/forum/topic/56585-nova-melhoria-gnre/
  Por: Gustavo Déo da Silva / BigWings

28/02/2020
-- ACBrGNREGuiaClass/ACBrGNREGuiaFR --
[*] https://www.projetoacbr.com.br/forum/topic/56465-melhorias-gnre/
   Por: Gustavo Déo da Silva
-- ACBrGNREGuiasRetorno --
[*] https://www.projetoacbr.com.br/forum/topic/56465-melhorias-gnre/?do=findComment&comment=370368
   Por: Gustavo Déo da Silva

20/02/2020
-- ACBrGNREGuias --
[*] Corrigido o nome do arquivo PDF.
   Por: Italo Jurisato Junior

18/02/2020
-- ACBrGNREServicos --
[*] Removido o comando Break do loop, pois ele estava impedindo que fossem 
    salvos todas as guias retornadas.
   Por: Italo Jurisato Junior

29/01/2020
-- Diversos --
[*] Implementado o SalvarXML que grava em disco o XML das guias separadamente.
    por: Italo Jurisato Junior

11/12/2019
-- pgnreGNREW --
[*] Estava gerando a tag valorGNRE 2 vezes.
    por: Italo Jurisato Junior

13/11/2019
-- pgnreRetConsResLoteGNRE/ --
[*] Melhorias na leitura do retorno da consulta do GNRE versão 2.00
    por: Murilo X / Italo Jurisato Junior

-- ACBrGNREGuiasRetorno --
[*] Melhorias na leitura da Guia em formato XML do GNRE versão 2.00
    por: Murilo X / Italo Jurisato Junior

11/11/2019
-- pgnreRetConsResLoteGNRE --
[*] Melhorias na leitura do retorno da consulta do GNRE versão 2.00
    por: Eremar Mates
-- Diversos --
[+] Implementado a leitura da Guia em formato XML do GNRE versão 2.00
    por: Italo Jurisato Junior

07/11/2019
-- pgnreRetConsResLoteGNRE --
[*] Melhorias na leitura do retorno da consulta do GNRE versão 2.00
    por: Italo Jurisato Junior

23/10/2019
-- ACBrGNREServicos --
[+] Inclusão das URL de produção da versão 2.00
    por: Everto f

29/08/2019
[*] pgnreGNREW
    Possível correção na geração da tag <periodo> versão 2.00
   Por: Italo Jurisato Junior

28/08/2019
[+] pgnreRetConsResLoteGNRE
    Implementado a leitura do retorno do GNRE versão 2.00
   Por: Italo Jurisato Junior
[*] pgnreGNRE/pgnreGNREW
    https://www.projetoacbr.com.br/forum/topic/53172-gnre-200/?do=findComment&comment=349758
   Por: Daniel De Paula Romanini

27/08/2019
[*] pgnreGNREW
    https://www.projetoacbr.com.br/forum/topic/53172-gnre-200/
   Por: Italo Jurisato Junior

19/08/2019
[*] pgnreGNREW
    Alterado a forma de gerar o atributo tipo do tag documentoOrigem.
   Por: Italo Jurisato Junior

11/07/2019
[+] ACBrGNReGuias
Adicionado campo TipoGNRe na leitura .ini (LerArqIni)

11/07/2019
[+] pgnreConversao
Adicionado função StrToVersaoGNRe para conversão cód versão

23/04/2019
-- Diversos --
[*] Mais alguns ajustes visando a versão (2.00).
    Se faz necessário testes.
   Por: Italo Jurisato Junior

22/04/2019
-- Diversos --
[*] Mais alguns ajustes visando a versão (2.00).
    Se faz necessário testes.
   Por: Italo Jurisato Junior

17/04/2019
-- Diversos --
[*] Adequação do componente para a nova versão (2.00).
    Se faz necessário testes.
   Por: Italo Jurisato Junior

02/04/2019
-- Diversos --
[*] Adequação do componente para a nova versão (2.00).
    Se faz necessário testes.
   Por: Italo Jurisato Junior

21/12/2018
--ACBrGNReGuias.pas--
[*] Não estava salvando o XML da Guia.
   Por: Italo Jurisato Junior

31/10/2018
-- ACBrGNREConfiguracoes --
[+] Acrescentado os métodos GravarINI e LerINI responsáveis por salvar e ler
    de um arquivo INI as configurações do componente que serão utilizados
    na ACBrLibGNRe.
   Por: Italo Jurisato Junior

25/10/2018
-- Diversos --
[-] O componente não estava obedecendo o Path informado em PathPDF ao usar o 
    método ImprimirPDF (Fortes Report), correção realizada.
   Por: Italo Jurisato Junior

20/10/2018
-- ACBrGNREWebServices --
[*] Removido os métodos TGNRERecepcao.GerarPrefixoArquivo e TGNRERecepcao.GetLote,
    pelo simples fato de não existir um numero de lote e com isso ao salvar os 
    arquivos de envio e retorno estavam ficando incompletos.
    Agora o prefiso usado nesses arquivos será a data/hora.
   Por: Italo Jurisato Junior

31/07/2018
--ACBrGNReGuias.pas--
[+] Implementado o método para a leitura de arquivo INI, que é utilizado no
    ACBrMonitor Plus
   Por: Italo Jurisato Junior

--ACBrGNReGuiaRL.pas--
[-] Correção de AV na Guia do Fortes, contribuição: BigWings
	http://www.projetoacbr.com.br/forum/topic/36490-impress%C3%A3o-gnre-erro-no-lfm/
	por: Celso Marigo Junior

27/12/2016
-- pgnreGNREW --
[*] Evitar a duplicidade de alertas.
    Por: Italo Jurisato Junior

21/12/2016
[*] Melhoria na impressão em Fortes e correção de erro
		http://www.projetoacbr.com.br/forum/topic/31853-erro-ao-imprimir-gnre/
		por : Juliomar Marchetti
		
20/12/2016
[*] Melhoria para GNRE em Fast Report
		http://www.projetoacbr.com.br/forum/topic/34030-fontes-alterados/
		por : Juliomar Marchetti
		
24/10/2016
[-] Correção da impressão da Guia do GNRE em Fortes
		http://www.projetoacbr.com.br/forum/topic/31853-erro-ao-imprimir-gnre/
		por : Juliomar Marchetti
		
03/08/2016
[*] Adição de suporte do fortes para as guias do gnre
		http://www.projetoacbr.com.br/forum/topic/31424-modulo-gnre-para-o-monitor-plus/
		por : Juliomar Marchetti
24/06/2016
[-] Melhoria para impressão do código barras em jato de tinta
		http://www.projetoacbr.com.br/forum/topic/30853-c%C3%B3digo-de-barras-da-gnre-em-impressora-jato-de-tinta/
		por : Juliomar Marchetti
		
26/04/2016
[*] Diversas alterações visando a correções de problemas de leitura de retornos.
    por: Siagri Sistemas

13/04/2016
-- ACBrGNREWebServices --
[*] Método "TGNREWebService.Clear" modificado para inicializar:
    SSL.UseCertificateHTTP := True  
    por: DSA / Italo Jurisato Junior

28/03/2016
--ACBrGNREGuiaFR
[*] Adição do showdialog para exibição e número de cópias em fast report
		http://www.projetoacbr.com.br/forum/topic/28940-corre%C3%A7%C3%B5es-na-impress%C3%A3o-da-gnre-fastreport/
    por: Juliomar Marchetti

24/03/2016
-- ACBrGNREConfiguracoes-ACBrGNREWebServices
[*] Melhoria proposta pra separar os txt gerado no gnre em pasta diferente do xml!
		como era usado local as implementações foram nas heranças do ACBrDFe
		http://www.projetoacbr.com.br/forum/topic/18312-acbrgnre-problemas-com-o-exemplo/?do=findComment&comment=191007
		por: Juliomar Marchetti

20/03/2016
[*] Correção para o estado do maranhã vem sem informação de data
		http://www.projetoacbr.com.br/forum/topic/18312-acbrgnre-problemas-com-o-exemplo/?do=findComment&comment=190594
		por: Juliomar Marchetti
		
12/03/2016
[*] Modificado para deixar alguns botões fora do preview em fast report
		por: Juliomar Marchetti

08/03/2016
[*] Correções do ACBrGNRE
		http://www.projetoacbr.com.br/forum/topic/26605-acbrgnre-na-trunk2/?page=5

07/03/2016   
-- ACBrDFeCapicom, ACBrDFeCapicomDelphiSoap --
[*] Ajustes para compilação em 64 bits. Remoção de Hints e Warnings   (por: DSA)

-- ACBrGNREWebServices --
[*] Ajustes para novo tratamento de "RetornoWS" sem tratamento de conversão
[*] Remoção de Warnings   (por: DSA)

-- ACBrGNREGuias --
[+] Adicionada suporte a Configuracoes.Geral.RetirarEspacos   (por: DSA)

24/02/2016
[*] Novas implementações para resolver erros da geração do gnre
		por : Juliomar Marchetti

18/02/2016
[*] Diversas correções realizadas por: Cesar Balbinott, Leandro Silva visando
    fazer o componente funcionar de forma correta.
    

17/02/2016
-- ACBrGNREGuias --
[*] Refactoring para usar a nova rotina de validação de CNPJ, do DFeSSL (por: DSA)

17/02/2016
-- ACBrGNREGuias --
[-] Acerto para validar corretamente a raiz do certificado quando é o certificado 
    é emitido para o CPF do responsável e não para o CNPJ da empresa.
    por: regys.silveria / Italo Jurisato Junior

12/01/2016
-- ACBrGNREWebServices --
[*] Inicio do Refactoring para o Trunk2 (não foi testado a compilação).
    Por: Italo Jurisato Junior

09/12/2013
[+] Doação do componente para o Projeto ACBr
    Por: Claudemir Vitor Pereira



